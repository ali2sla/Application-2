
<!DOCTYPE html>
<html>
    <head>
        <title>Cinnamoroll Application Simulation</title>
        <!-- This meta tag make the text scale correctly on desktop AND mobile browsers. -->
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- This link and 2 scripts load the Bootstrap CSS stylesheet -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    </head>

<!-- Create image.-->
    <!-- The nav tag creates a navigation bar at the top. -->
    <nav class="navbar navbar-expand-md navbar-dark bg-primary">
        <div class="container-fluid">
                <a class="navbar-brand" href="#">Cinnamoroll</a>
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#myNavbar">
                    <span class="navbar-toggler-icon"></span> 
                </button>
                <div class="collapse navbar-collapse" id="myNavbar">
                    <ul class="nav navbar-nav">
                        <li><a class="nav-link" href="simpleHTML/index.html">Information</a></li>
                        <li><a class="nav-link" href="index.html">Application</a></li>
                        <li><a class="nav-link" href="moreHTML/index.html">About</a></li> 
                    </ul>
                </div>
        </div>
    </nav>
    <br>

    <!-- The container div tag puts all later divs into a table-like layout. -->
    <div class="container-fluid">
        <div style="display: flex; justify-content: center;">
        <img src="Cinnamoroll_2.png" width="382" height="187" class="center">
        </div>

        <h2 style="text-align:center; color: #66ccff">Application</h2>
        <h4 style="text-align:center"> An Individual Test</h4>

        <div id="restored" class="alert alert-primary" role="alert" style="display:none;">
            Text input succesfully restored from previous usage.
        </div>

        <!-- Create personal information section of the quiz.-->
            <form id="set1" onsubmit="saveToLocalStorage()">
                <div class="form-group">

        <!-- Create rows of textboxes-->
                <div class="row">
                    <div class="col">
                        <label for="information1">First Name:</label>
                        <textarea class="form-control" id="information1" rows="1"></textarea>
                        </div>
                    <div class="col-2">
                        <label for="information2">Middle initial:</label>
                        <textarea class="form-control" id="information2" rows="1"></textarea>
                    </div>
                        <div class="col">
                        <label for="information3">Last Name:</label>
                        <textarea class="form-control" id="information3" rows="1"></textarea>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <label for="information4">Gender:</label>
                        <select class="form-control" id="information4">
                            <option value="s">Select gender:</option>
                            <option value="m">Male</option>
                            <option value="f">Female</option>
                            <option value="o">Other</option>
                        </select>  
                    </div>
                    <div class="col">
                        <label for="information5">DOB Month:</label>
                        <textarea class="form-control" id="information5" rows="1">MM</textarea>
                    </div>
                    <div class="col">
                        <label for="information6">Day:</label>
                        <textarea class="form-control" id="information6" rows="1">DD</textarea>
                    </div>
                    <div class="col">
                        <label for="information7">Year:</label>
                        <textarea class="form-control" id="information7" rows="1">DD</textarea>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <label for="information8">Address:</label>
                        <textarea class="form-control" id="information8" rows="1"></textarea>
                    </div>
                <div class="col">
                    <label for="information9">Email Address:</label>
                    <textarea class="form-control" id="information9" rows="1"></textarea>
                </div>
                <div class="col">
                    <label for="information10">Phone Number:</label>
                    <textarea class="form-control" id="information10" rows="1"></textarea>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <label for="information11">City:</label>
                    <textarea class="form-control" id="information11" rows="1"></textarea>
                </div>
                <div class="col">
                        <label for="information12">State/Province/Region:</label>
                        <textarea class="form-control" id="information12" rows="1"></textarea>
                </div>
                <div class="col">
                        <label for="information13">Zip code:</label>
                        <textarea class="form-control" id="information13" rows="1"></textarea>
                </div>
                <div class="col">
                        <label for="information14">Country:</label>
                        <textarea class="form-control" id="information14" rows="1"></textarea>
                </div>
            </div>
                </div>
            <br>
                <button type="submit" class="btn btn-primary btn-lg btn-block" id="next1" onclick="displayNextQuestions(1)">Next</button>
            <br>
    </form>

    <form id="set2" onsubmit="saveToLocalStorage()" style="display:none;">
            <div class="form-group">
    <!-- Create multiple choice section of the quiz.-->
            <p>If you were invited to a haunted house for free candy, what would you do?</p>
            <input type="radio" id="choice1" value="1"> Go there for five seconds and then run<br>
            <input type="radio" id="choice1" value="2"> Party<br>
            <input type="radio" id="choice1" value="3"> Enjoy the moment and explore the house<br>
            <input type="radio" id="choice1" value="4"> Not go<br>
            <br>
            <p> In a horror movie, who would you suspect of being the murderer?</p>
            <input type="radio" id="choice2" value="5"> The husband<br>
            <input type="radio" id="choice2" value="6"> The wife<br>
            <input type="radio" id="choice2" value="7"> The neighbor<br>
            <input type="radio" id="choice2" value="8"> The dog<br>
            <br>
            <p> How would you shop for Christmas presents?</p>
            <input type="radio" id="choice3" value="9"> Shop for the cheapest items<br>
            <input type="radio" id="choice3" value="10"> Buy whatever that person wants<br>
            <input type="radio" id="choice3" value="11"> Just buy anything expensive/luxurious enough<br>
            <input type="radio" id="choice3" value="12"> Not buy anything<br>
            <br>
            <p> Which of the following things would you do as a pirate?</p>
            <input type="radio" id="choice4" value="13"> Get scurvy<br>
            <input type="radio" id="choice4" value="14"> Party with crew members<br>
            <input type="radio" id="choice4" value="15"> Walk the plank<br>
            <input type="radio" id="choice4" value="16"> Raid other pirates<br>
            <br>
            <p> What would you do when there is a castle raid?</p>
            <input type="radio" id="choice5" value="17"> Ride away with your horse<br>
            <input type="radio" id="choice5" value="18"> Record it on YouTube<br>
            <input type="radio" id="choice5" value="19"> Warn the king about it<br>
            <input type="radio" id="choice5" value="20"> Go raiding the castle<br>
            </div>
            <br>
            <button type="submit" class="btn btn-primary btn-lg btn-block" id="next2" onclick="displayNextQuestions(2)">Next</button>
            <br>
        </form>

    <form id="set3" onsubmit="saveToLocalStorage()" style="display:none;">
        <div class="form-group">
        <!-- Create open response section of the quiz.-->
            <div class="col">
                <label for="response1">Describe yourself as a person (200 words or fewer).</label>
                <textarea class="form-control" id="response1" rows="10"></textarea>
            </div>
        <br>
            <div class="col">
                <label for="response2">If you have twenty four hours to live, what would you do? (200 words or fewer)</label>
                <textarea class="form-control" id="response2" rows="10"></textarea>
            </div>
        <br>
            <div class="col">
                <label for="response3">What was one crazy experience you remember? (200 words or fewer)</label>
                <textarea class="form-control" id="response3" rows="10"></textarea>
            </div>
        <br>
            <div class="col">
                <label for="response4">If you can travel back in time, what time period would you travel to? (200 words or fewer)</label>
                <textarea class="form-control" id="response4" rows="10"></textarea>
            </div>
        <br>
            <div class="col">
                <label for="response5">Out of all of the animals in the world, which one do you want to meet and why? (200 words or fewer)</label>
                <textarea class="form-control" id="response5" rows="10"></textarea>
                <br>
                <div class="form-group">
                    <label for="mCharacters">Here is a random Chinese/Japanese character:</label>
                    <textarea class="form-control" id="mCharacters" rows="1"></textarea>
                    <button type="button" class="btn btn-primary" onclick="LanguageCharacters()">Generate</button>
                </div>
                <br>
            </div>
            <br>
            <button type="submit" class="btn btn-primary btn-lg btn-block" id="next3" onclick="displayNextQuestions(3)">Next</button>
        </div>
    </form>

    <form id="set4" onsubmit="saveToLocalStorage()" style="display:none;">
        <!-- Terms and Service Link-->
            <div class="col">
                <input type="checkbox"> <label> I have read and accept the <a href="https://www.redditinc.com/policies/user-agreement">terms and conditions</a>.</label>
            </div>
        <br>

        <!-- Create submit button-->
        <button type="submit" class="btn btn-primary btn-lg btn-block" id="next4" onclick="done()">Submit</button>
        <br>
    </form>

    <form id="set5" onsubmit="saveToLocalStorage()" style="display:none;">
            <div class="form-group">
                <label for="whyNoResponse">If you can create any story (even a fictional one), what would be the plot of your story? (200 words or fewer)</label>
                <textarea class="form-control" id="whyNoResponse" rows="10"></textarea>
            </div>

            <br>
                <button type="submit" class="btn btn-primary btn-lg btn-block" onclick="done()">Submit</button>
            <br>
    </form>

        <!-- Create a page saying "thank you"-->
        <div id="thanks" name="thanks" class="alert alert-primary" role="alert" style="display:none;">
                Thank you for applying!
        </div>
    </div>

        <!-- Create script for next buttons-->
    <script>
        // Display next question
        function displayNextQuestions(set) {
            // Once next button is pressed, we're no longer talking about restored data.
            document.getElementById("restored").style.display = "none";

            // set is which set of questions was just displayed
            if (set > 0 && set < 6) {
                // stop displaying the current next button 
                var lastButton = document.getElementById("next"+set);
                lastButton.style.display = "none";
                // start displaying the next set (questions+button)
                var nextQuestions = document.getElementById("set"+(set+1));
                nextQuestions.style.display = "block";
            }
            // automatically scroll down to new questions
            window.location = "#set"+(set+1);
            // save number of last displayed set of questions in local storage
            window.localStorage.setItem("lastDisplayedSet", set);
            window.localStorage.setItem("fromNext", true);
        }

        // Create code that would access APIs.
        var getJSON = function(url, callback) {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', url, true);
            xhr.responseType = 'json';
            xhr.onload = function() {
                var status = xhr.status;
                 if (status === 200) {
                    callback(null, xhr.response);
                } else {
                    callback(status, xhr.response);
                }
            };
            xhr.send();
        };

        // Generate random pokemon image
        function randomIntFromInterval(min,max) {
            // min and max included 
            return Math.floor(Math.random()*(max-min+1)+min);
        }
        
        function LanguageCharacters() {
                var mCharactersDiv = document.getElementById('mCharacters');
                getJSON('http://ccdb.hemiola.com/characters/',
                function(err, data) {
                    if (err !== null) {
                        alert('Language API went wrong: ' + err);
                    } else {
                        var character = data[randomIntFromInterval(0, data.length)];
                        mCharactersDiv.value = character.string;
                    }
                });
            }

        // Create done function
        function done() {
            // Once submit button is pressed, we're no longer talking about restored data.
            document.getElementById("restored").style.display = "none";
            // Require feedback or explanation for no feedback
            var responseAnswer = document.getElementById("response1").value;
            var responseAnswer = document.getElementById("response2").value;
            var responseAnswer = document.getElementById("response3").value;
            var responseAnswer = document.getElementById("response4").value;
            var responseAnswer = document.getElementById("response5").value;
            if (responseAnswer === "" || responseAnswer.toLowerCase() === "n/a") {
                var whyNoResponseAnswer = document.getElementById("whyNoResponse").value;
                if (whyNoResponseAnswer === "") {
                    displayNextQuestions(4);
                    return;
                }
            }
            // stop displaying all of the alerts, questions, and buttons 
            for (var i = 1; i < 5; i = i + 1) {
                var nextQuestions = document.getElementById("set"+i);
                nextQuestions.style.display = "none";
            }
            // start displaying the thanks alert
            var thanksAlert = document.getElementById("thanks");
            thanksAlert.style.display = "block";
            // not in the middle of form completion any more
            window.localStorage.setItem("lastDisplayedSet", 0);
        }
        function saveToLocalStorage() {
            // dataObject is an JSON Object; it has fields (no methods)
            // Each field gets a name (on left of :)
            //             and a value (on right of :)
            // These field values are the current typed text in each textbox
            var dataObject = {
                "information1" :       document.getElementById("information1").value,
                "information2" :       document.getElementById("information2").value,
                "information3" :       document.getElementById("information3").value,
                "information4" :       document.getElementById("information4").value,
                "information5" :       document.getElementById("information5").value,
                "information6" :       document.getElementById("information6").value,
                "information7" :       document.getElementById("information7").value,
                "information8" :       document.getElementById("information8").value,
                "information9" :       document.getElementById("information9").value,
                "information10" :      document.getElementById("information10").value,
                "information11" :      document.getElementById("information11").value,
                "information12" :      document.getElementById("information12").value,
                "information13" :      document.getElementById("information13").value,
                "information14" :      document.getElementById("information14").value,
                "choice1" :            document.getElementById("choice1").value,
                "choice2" :            document.getElementById("choice2").value,
                "choice3" :            document.getElementById("choice3").value,
                "choice4" :            document.getElementById("choice4").value,
                "choice5" :            document.getElementById("choice5").value,
                "response1" :            document.getElementById("response1").value,
                "response2" :            document.getElementById("response1").value,
                "response3" :            document.getElementById("response1").value,
                "response4" :            document.getElementById("response1").value,
                "response5" :            document.getElementById("response1").value,
            };
            // Turn the data object into a string.
            var dataObjectAsString = JSON.stringify(dataObject);
            // Store the data object string in local storage in the variable named 'data'.
            window.localStorage.setItem("data", dataObjectAsString);
        }
        function restoreFromLocalStorage() {
            var fromNext = window.localStorage.getItem("fromNext");
            if (fromNext === true) {
                // We're restoring (window.onload) after next button press, so don't restore
                window.localStorage.setItem("fromNext", false);
                return;
            }

            // Don't restore and display data if form is complete; only Thanks alert needs displaying.
            if (document.getElementById("thanks").style.display === "block") {
                return;
            }

            // Get the data object string from local storage and try to turn it back into an object.
            // This takes the data from local storage and sets the textbox to the values.
            var dataObjectAsString = window.localStorage.getItem("data");
            if (dataObjectAsString === null) {
                return;
            }
            var dataObject = JSON.parse(dataObjectAsString);
            if (dataObject === null) {
                return;
            }

            // We successfully got a data object and now textboxk's can get the saved values.
            document.getElementById("information1").value = dataObject.information1;
            document.getElementById("information2").value = dataObject.information2;
            document.getElementById("information3").value = dataObject.information3;
            document.getElementById("information4").value = dataObject.information4;
            document.getElementById("information5").value = dataObject.information5;
            document.getElementById("information6").value = dataObject.information6;
            document.getElementById("information7").value = dataObject.information7;
            document.getElementById("information8").value = dataObject.information8;
            document.getElementById("information9").value = dataObject.information9;
            document.getElementById("information10").value = dataObject.information10;
            document.getElementById("information11").value = dataObject.information11;
            document.getElementById("information12").value = dataObject.information12;
            document.getElementById("information13").value = dataObject.information13;
            document.getElementById("information14").value = dataObject.information14;
            document.getElementById("choice1").value = dataObject.choice1;
            document.getElementById("choice2").value = dataObject.choice2;
            document.getElementById("choice3").value = dataObject.choice3;
            document.getElementById("choice4").value = dataObject.choice4;
            document.getElementById("choice5").value = dataObject.choice5;
            document.getElementById("response1").value = dataObject.response1;
            document.getElementById("response2").value = dataObject.response2;
            document.getElementById("response3").value = dataObject.response3;
            document.getElementById("response4").value = dataObject.response4;
            document.getElementById("response5").value = dataObject.response5;

            // Display Restored alert at top of form
            document.getElementById("restored").style.display = "block";
            // Go through all previously-completed sets of questions and display them
            var set = window.localStorage.getItem("lastDisplayedSet");
            for (var i = 1; i <= set; i = i + 1) {
                // stop displaying the current next button 
                var lastButton = document.getElementById("next"+i);
                lastButton.style.display = "none";
                // start displaying the next set (questions+button)
                var nextQuestions = document.getElementById("set"+(i+1));
                nextQuestions.style.display = "block";
            }
            // automatically scroll down to new questions
            window.location = "#set"+(set+1);
        }
        window.onload = function() { // Runs code on load
            restoreFromLocalStorage();
            LanguageCharacters();
        };
            function resetData() {
            // Reset and clear form.
            window.localStorage.setItem("lastDisplayedSet", 0);
            // Make sure page does not claim it has restored data
            document.getElementById("restored").style.display = "none";
            // Make sure page does not claim its done.
            document.getElementById("thanks").style.display = "none";
            // Forget the previous data object that saved previous responses
            window.localStorage.setItem("data", null);
            // Clear all of the textboxes
            document.getElementById("information1").value = "";
            document.getElementById("information2").value = "";
            document.getElementById("information3").value = "";
            document.getElementById("information4").value = "";
            document.getElementById("information5").value = "";
            document.getElementById("information6").value = "";
            document.getElementById("information7").value = "";
            document.getElementById("information8").value = "";
            document.getElementById("information9").value = "";
            document.getElementById("information10").value = "";
            document.getElementById("information11").value = "";
            document.getElementById("information12").value = "";
            document.getElementById("information13").value = "";
            document.getElementById("information14").value = "";
            document.getElementById("choice1").value = "";
            document.getElementById("choice2").value = "";
            document.getElementById("choice3").value = "";
            document.getElementById("choice4").value = "";
            document.getElementById("choice5").value = "";
            document.getElementById("response1").value = "";
            document.getElementById("response2").value = "";
            document.getElementById("response3").value = "";
            document.getElementById("response4").value = "";
            document.getElementById("response5").value = "";

            // scroll back to top of page
            window.location.reload();
        }
        </script>
    </body>
</html>